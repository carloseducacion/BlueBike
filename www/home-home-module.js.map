{"version":3,"sources":["webpack:///./src/app/home/home.module.ts","webpack:///./src/app/home/home.page.html","webpack:///./src/app/home/home.page.scss","webpack:///./src/app/home/home.page.ts"],"names":[],"mappings":"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","file":"home-home-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { IonicModule } from '@ionic/angular';\nimport { FormsModule, ReactiveFormsModule} from '@angular/forms';\nimport { RouterModule } from '@angular/router';\n\nimport { HomePage } from './home.page';\nimport { HttpClientModule, HttpClient } from '@angular/common/http';\nimport { TranslateModule, TranslateLoader } from '@ngx-translate/core';\nimport { setTranslateLoader } from '../app.module';\nimport {PipesModule} from \"../pipes/pipes.module\";\n\n@NgModule({\n  imports: [\n    FormsModule,\n    ReactiveFormsModule,\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild([\n      {\n        path: '',\n        component: HomePage\n      }\n    ]),\n    HttpClientModule, \n    TranslateModule.forChild({\n      loader: {\n        provide: TranslateLoader, \n        useFactory: (setTranslateLoader), deps: [HttpClient]\n      }\n    }),\n    PipesModule\n  ],\n  declarations: [HomePage]\n})\nexport class HomePageModule { \n}\n","module.exports = \"<ion-header no-border>\\n  <ion-toolbar color=\\\"primary\\\">\\n    <ion-title style=\\\"text-align:center !important\\\">\\n     <!--<img style=\\\"vertical-align:middle;display:inline-block\\\" src=\\\"../../assets/icon/BBIcon400.png\\\" height=\\\"35\\\" style=\\\"margin:0\\\">-->\\n     <span style=\\\"font-weight:normal;font-size:0.95rem\\\">{{\\\"login\\\" | translate | capitalize}}</span>\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content padding color=\\\"primary\\\">\\n    <ion-grid *ngIf=\\\"!isLogged()\\\">\\n        <ion-row>\\n          <ion-col>\\n              <ion-card color=\\\"primary\\\" style=\\\"height:100%;border: none !important;box-shadow: none !important;\\\">\\n                  <ion-card-header>\\n                      <ion-card-title style=\\\"text-align: center\\\">{{\\\"teachers\\\" |translate |capitalize }}</ion-card-title>\\n                  </ion-card-header>\\n                    <ion-card-content>\\n                  <form [formGroup]=\\\"todo\\\" (ngSubmit)=\\\"logForm()\\\"> \\n                      <ion-item>\\n                        <ion-input #user id=\\\"user\\\" type=\\\"text\\\" formControlName=\\\"user\\\" placeholder=\\\"{{'userMoodle' |translate }}\\\" (keyup.enter)=\\\"handleLogin($event)\\\"></ion-input> \\n                      </ion-item>\\n                      <ion-item>\\n                        <ion-input #pass id=\\\"pass\\\" type=\\\"password\\\" formControlName=\\\"pass\\\" placeholder=\\\"{{'passMoodle' | translate }}\\\" (keyup.enter)=\\\"handleLogin($event)\\\"></ion-input> \\n                      </ion-item>\\n                      \\n                      <ion-button [color]=\\\"todo.valid? 'tertiary' : 'medium'\\\" type=\\\"submit\\\" expand=\\\"full\\\" style=\\\"height:3rem;width:100%;padding:0px;margin:0px;vertical-align: middle;font-size:1.15rem\\\" [disabled]=\\\"!todo.valid\\\">{{\\\"dologin\\\" | translate}}</ion-button>\\n                    \\n                    </form>\\n                  </ion-card-content>\\n              </ion-card>\\n          </ion-col>\\n        </ion-row>\\n        <ion-row >\\n            <ion-col>\\n                <ion-card style=\\\"height:100%;border: none !important;box-shadow: none !important;\\\">\\n                    <ion-card-header color=\\\"primary\\\">\\n                        <ion-card-title style=\\\"text-align: center\\\">{{\\\"students\\\" |translate |capitalize }}\\n                        <div style=\\\"text-align: center;font-size: 0.75rem\\\">({{\\\"scanningQR\\\" |translate}})</div>\\n                        </ion-card-title>\\n                    </ion-card-header>\\n                      <ion-card-content color=\\\"primary\\\" style=\\\"height:100%;text-align:center\\\">\\n                      \\n                            <ion-button color=\\\"primary\\\" style=\\\"width:100%;height:auto;box-shadow: none !important;border:none;--box-shadow:none !important\\\" fill=\\\"solid\\\" (click)=\\\"loginQR()\\\">\\n                                <ion-icon name=\\\"aperture\\\" style=\\\"zoom:6.0;\\\"></ion-icon>\\n                              </ion-button>\\n                   \\n                     \\n                    </ion-card-content>\\n                </ion-card>\\n            </ion-col>\\n          </ion-row>\\n      </ion-grid>\\n</ion-content>\\n\"","module.exports = \"ion-grid {\\n  height: 100%; }\\n  ion-grid ion-row {\\n    height: 50%; }\\n  ion-card {\\n  margin: 1px !important;\\n  padding: 2px !important; }\\n  ion-card ion-card-header {\\n    padding: 4px; }\\n  ion-card ion-card-content {\\n    padding: 4px; }\\n  ion-input {\\n  padding: 2px;\\n  font-size: 1.1rem; }\\n  ion-card-title {\\n  font-weight: normal; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9jYXJsb3NzZXJyYW5vL2lvbmljL0JsdWVCaWtlL3NyYy9hcHAvaG9tZS9ob21lLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQTtFQUNJLGFBQVksRUFLYjtFQU5IO0lBSU0sWUFBVyxFQUNaO0VBRUg7RUFDSSx1QkFBcUI7RUFDckIsd0JBQXNCLEVBT3pCO0VBVEQ7SUFJTSxhQUFXLEVBQ1o7RUFMTDtJQU9NLGFBQVcsRUFDWjtFQUVMO0VBQ0ksYUFBVztFQUNYLGtCQUFnQixFQUNuQjtFQUNEO0VBQ0ksb0JBQW1CLEVBQ3RCIiwiZmlsZSI6InNyYy9hcHAvaG9tZS9ob21lLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIlxuaW9uLWdyaWQge1xuICAgIGhlaWdodDogMTAwJTtcbiAgXG4gICAgaW9uLXJvdyB7XG4gICAgICBoZWlnaHQ6IDUwJTtcbiAgICB9XG4gIH1cbiAgaW9uLWNhcmQge1xuICAgICAgbWFyZ2luOjFweCAhaW1wb3J0YW50O1xuICAgICAgcGFkZGluZzoycHggIWltcG9ydGFudDtcbiAgICAgIGlvbi1jYXJkLWhlYWRlcntcbiAgICAgICAgcGFkZGluZzo0cHg7XG4gICAgICB9XG4gICAgICBpb24tY2FyZC1jb250ZW50e1xuICAgICAgICBwYWRkaW5nOjRweDtcbiAgICAgIH1cbiAgfVxuICBpb24taW5wdXR7XG4gICAgICBwYWRkaW5nOjJweDtcbiAgICAgIGZvbnQtc2l6ZToxLjFyZW07XG4gIH1cbiAgaW9uLWNhcmQtdGl0bGV7XG4gICAgICBmb250LXdlaWdodDogbm9ybWFsO1xuICB9XG4iXX0= */\"","import { Component, ViewChild } from '@angular/core';\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\nimport { LoadingController, ToastController, Platform } from '@ionic/angular';\nimport { TranslateService } from '@ngx-translate/core';\nimport { AuthenticationService } from '../servicios/authentication.service';\nimport { Router } from '@angular/router';\nimport { Input } from '@angular/compiler/src/core';\nimport { Keyboard } from '@ionic-native/keyboard/ngx';\nimport { CloudService } from '../servicios/cloud.service';\n\n\n\n@Component({\n  selector: 'app-home',\n  templateUrl: 'home.page.html',\n  styleUrls: ['home.page.scss']\n})\nexport class HomePage {\n  @ViewChild('user') userinput;\n  @ViewChild('pass') passinput;\n  \n  private todo : FormGroup;\n  private myloading:any;\n  private exitB:any;\n\n  constructor(\n            private formBuilder: FormBuilder,\n            private loadingController:LoadingController,\n            private translate:TranslateService,\n            private authS:AuthenticationService,\n            private router:Router,\n            private toastCtrl: ToastController,\n            private platform:Platform,\n            private keyboard: Keyboard,\n            private cloud:CloudService\n    ){\n    //Creamos el grupo de formulario\n    this.todo = this.formBuilder.group({ \n      user: ['', Validators.compose([Validators.required,\n        Validators.pattern('^[p](.)+')])],  //mail's teachers begins by p\n      pass: ['', Validators.required]\n      });\n      \n    }\n    ionViewCanEnter(){\n      return !this.authS.isLogged();\n    }\n    ionViewCanLeave(){\n      return !this.authS.isLogged();\n    }\n    ionViewWillLeave(){ \n    }\n    ionViewWillEnter(){  /*when go back */\n      if(this.authS.isLogged()){\n        if(this.authS.getRole()==\"prof\"){\n          this.router.navigate(['profesor']);\n        }else{\n          this.router.navigate(['usuario']);\n        }\n      }\n    }\n    loginQR(){\n      this.router.navigate(['usuario/login']);\n    }\n    logForm(){ \n      this.myloading=this.presentLoading(); \n\n      \n      this.authS.logInTeacher(this.todo.value).subscribe(data=>{\n          if(data['token']){\n            this.authS.setId(this.todo.value.user,\"prof\").then(result=>{\n              /* login as a teacher successfully */\n              this.loadingController.dismiss().then(()=>{\n                this.authS.avatar=this.cloud.getPic(this.todo.value.user).then((d)=>{\n                  this.authS.avatar=d;\n                  this.router.navigate(['profesor']);   //Esto no lo tengo claro\n                });\n                \n              });\n              \n            })\n            .catch(err=>{\n              /* error saving data in local, but credentials are correct*/\n              console.log(err);\n              this.loadingController.dismiss();\n            });\n          }else{\n            /* credentials aren't correct */\n            this.loadingController.dismiss();\n            this.presentToastWithOptions(this.translate.instant(\"errorCredentials\"));\n            this.userinput.setFocus();\n            this.keyboard.show();  //mostramos teclado\n          }\n          \n      });\n      //this.loadingController.dismiss();\n    }\n    async presentLoading() {\n      this.myloading = await this.loadingController.create({\n      message: this.translate.instant(\"loging...\") });\n      await this.myloading.present(); \n    }\n    async presentToastWithOptions(msg) {\n      const toast = await this.toastCtrl.create({\n        message: msg,\n        showCloseButton: true,\n        position: 'bottom',\n        closeButtonText: 'Ok',\n        duration: 5000\n      });\n      toast.present();\n    }\n    isLogged(){\n      return this.authS.isLogged();\n    }\n    /* \n      Está función es ejecuta al pulsar enter en los campos input del formulario: ver\n      código html para conocer cómo se controla el evento\n      Controlamos que ocurre si el usuario está iniciado sesión en el formulario\n      con el teclado abierto y pulsa enter. \n      En ese caso si estamos en el campo usuario tabulamos a contraseña.\n      En el caso de estar en contraseña mandamos el formulario para proceder a inicio de sesión\n      */\n    handleLogin(e){\n      if(e.srcElement['id']==\"user\"){\n        this.passinput.setFocus();\n        this.keyboard.show();\n      }\n      if(e.srcElement['id']==\"pass\"){\n        if(this.todo.valid){\n          this.logForm();\n        }\n      }\n    }\n}\n"],"sourceRoot":""}