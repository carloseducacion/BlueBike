{"version":3,"sources":["webpack:///./src/app/profesor/p-scanner/p-scanner.module.ts","webpack:///./src/app/profesor/p-scanner/p-scanner.page.html","webpack:///./src/app/profesor/p-scanner/p-scanner.page.scss","webpack:///./src/app/profesor/p-scanner/p-scanner.page.ts"],"names":[],"mappings":"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","file":"p-scanner-p-scanner-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { PScannerPage } from './p-scanner.page';\nimport { TranslateModule, TranslateLoader } from '@ngx-translate/core';\nimport { setTranslateLoader } from 'src/app/app.module';\nimport { HttpClient } from '@angular/common/http';\nimport { PipesModule } from 'src/app/pipes/pipes.module';\nimport { CustomLoadingModule } from 'src/app/customModules/custom-loading/custom-loading.module';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PScannerPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    CustomLoadingModule,\n    PipesModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes),\n    TranslateModule.forChild({\n      loader: {\n        provide: TranslateLoader, \n        useFactory: (setTranslateLoader), deps: [HttpClient]\n      }\n    })\n  ],\n  declarations: [PScannerPage]\n})\nexport class PScannerPageModule {}\n","module.exports = \"<ion-header no-border color=\\\"primary\\\">\\n    <ion-toolbar color=\\\"primary\\\">\\n      <ion-buttons slot=\\\"start\\\">\\n        <ion-menu-toggle>\\n          <ion-button>\\n            <ion-icon slot=\\\"icon-only\\\" name=\\\"menu\\\"></ion-icon>\\n          </ion-button>\\n        </ion-menu-toggle>\\n      </ion-buttons>\\n      <ion-title>\\n        <span style=\\\"font-weight:normal\\\">BlueBike</span>\\n      </ion-title>\\n    </ion-toolbar>\\n  </ion-header>\\n\\n<ion-content padding style=\\\"background: none transparent;\\\">\\n<img src=\\\"assets/imgs/tree.gif\\\" height=\\\"100%\\\">\\n</ion-content>\\n\"","module.exports = \"ion-app {\\n  background: none transparent; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9jYXJsb3NzZXJyYW5vL2lvbmljL0JsdWVCaWtlL3NyYy9hcHAvcHJvZmVzb3IvcC1zY2FubmVyL3Atc2Nhbm5lci5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSw2QkFBNEIsRUFDL0IiLCJmaWxlIjoic3JjL2FwcC9wcm9mZXNvci9wLXNjYW5uZXIvcC1zY2FubmVyLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImlvbi1hcHB7XG4gICAgYmFja2dyb3VuZDogbm9uZSB0cmFuc3BhcmVudDtcbn0gXG4iXX0= */\"","import { Component, OnInit } from '@angular/core';\nimport { QRScanner, QRScannerStatus } from '@ionic-native/qr-scanner/ngx';\nimport { AlertController, NavController } from '@ionic/angular';\nimport { TranslateService } from '@ngx-translate/core';\nimport { CustomLoadingModule } from 'src/app/customModules/custom-loading/custom-loading.module';\nimport { CloudService } from 'src/app/servicios/cloud.service';\nimport { Dialogs } from '@ionic-native/dialogs/ngx';\nimport { Vibration } from '@ionic-native/vibration/ngx';\nimport { environment } from 'src/environments/environment';\nimport { CustomToastModule } from 'src/app/customModules/custom-toast/custom-toast.module';\n\n@Component({\n  selector: 'app-p-scanner',\n  templateUrl: './p-scanner.page.html',\n  styleUrls: ['./p-scanner.page.scss'],\n})\nexport class PScannerPage implements OnInit {\n  id = null;\n\n  constructor(private qrScanner: QRScanner, private alertController: AlertController,\n    private translate: TranslateService, private navCtrl: NavController,\n    private loading: CustomLoadingModule,\n    private cloud: CloudService,\n    private dialogs: Dialogs,\n    private vibration: Vibration,\n    private toast: CustomToastModule) { }\n  scanSub: any;\n\n  ionViewWillLeave() {\n    window.document.querySelector('ion-app').classList.remove('cameraView');\n    this.qrScanner.hide().then(() => {\n      this.qrScanner.destroy();\n    });\n  }\n\n  ngOnDestroy() {\n    window.document.querySelector('ion-app').classList.remove('cameraView');\n    this.qrScanner.hide().then(() => {\n      this.qrScanner.destroy();\n    }); // hide camera preview\n\n  }\n  ngOnInit() { }\n  ionViewWillEnter() {\n    this.id = null;\n    this.qrScanner.prepare()\n      .then((status: QRScannerStatus) => {\n        if (status.authorized) {\n          this.qrScanner.show();\n          window.document.querySelector('ion-app').classList.add('cameraView');\n          this.scanSub = this.qrScanner.scan().subscribe((d) => {\n            this.analizeData(d);\n\n          });\n        } else if (status.denied) {\n          console.log(\"denied\");\n          this.qrScanner.openSettings();\n        } else {\n          // permission was denied, but not permanently. You can ask for permission again at a later time.\n          console.log(\"other denied\");\n        }\n      })\n      .catch((e: any) => console.log('Error is', e));\n  }\n  analizeData(d: string) {\n    //BEEP\n    this.dialogs.beep(1);\n    this.vibration.vibrate(500);\n    //console.log(d);\n    let regex = new RegExp(\"[\\\\r\\\\n]\" + environment.QRf1 + \"\\\\:(.+)\", \"i\");\n    //let test = d.match(/[\\r\\n]N\\:(.+)/i);  //OJO\n    let test = d.match(regex);\n    let nombre = null;\n    if (test) {\n      nombre = test[1];\n    }\n    regex = new RegExp(environment.QRf2 + \"\\\\:(.+)\", \"i\")\n    //test = d.match(/TITLE\\:(.+)/i); //OJO\n    test = d.match(regex);\n    let grupo = null;\n    if (test) {\n      grupo = test[1];\n    }\n    if (nombre != null && grupo != null) {\n      this.id = nombre + \" \" + grupo;\n      this.pauseQR();\n      this.presentAlertConfirm(this.translate.instant('addtrip') + \":<br><strong style='font-size:1.2rem'>\" + this.id + \"</strong> ?\", \"scan\");\n    } else {\n      this.dialogs.alert(this.translate.instant(\"errorQR\"), \"Error\");\n    }\n  }\n  pauseQR() {\n    this.qrScanner.hide();\n    this.qrScanner.pausePreview();\n    window.document.querySelector('ion-app').classList.remove('cameraView');\n  }\n  resumeQR() {\n    this.qrScanner.show();\n    this.qrScanner.resumePreview();\n    this.scanSub = this.qrScanner.scan().subscribe((d) => {\n      this.analizeData(d);\n    });\n    window.document.querySelector('ion-app').classList.add('cameraView');\n  }\n  closeQR() {\n    window.document.querySelector('ion-app').classList.remove('cameraView');\n    this.qrScanner.hide().then(() => {\n      this.qrScanner.destroy();\n    });\n    this.scanSub.unsubscribe(); // stop scanning\n  }\n  newScanner() {\n    this.presentAlertConfirm(this.translate.instant('newscan'), \"exit\");\n  }\n\n\n\n\n  async presentAlertConfirm(msg, type?) {\n    const alert = await this.alertController.create({\n      header: '',\n      message: msg,\n      cssClass: 'profalert',\n      buttons: [\n        {\n          text: this.translate.instant(\"cancel\"),\n          role: 'cancel',\n          cssClass: 'cancelo',\n          handler: (blah) => {\n            alert.dismiss();\n            if (!type || type == \"scan\") {\n              console.log(\"No quiero guardar info\");\n              alert.dismiss();\n              this.newScanner();\n            } else {\n              console.log(\"Me voy\");\n              this.closeQR();\n              alert.dismiss();\n              this.navCtrl.navigateBack(['/profesor/home']);\n            }\n          }\n        }, {\n          text: 'Ok',\n          cssClass: 'ok',\n          handler: () => {\n            if (!type || type == \"scan\") {\n              //add trip\n              console.log(\"AÑadir viaje\")\n              this.loading.show(\"\");\n              this.addTrip().then(() => {\n                alert.dismiss();\n                this.loading.hide();\n                this.newScanner();\n              });\n\n            } else {\n              console.log(\"Quiero escanear de nuevo\")\n              this.resumeQR();\n              alert.dismiss();\n            }\n            console.log(\"OK\");\n          }\n        }\n      ]\n    });\n\n    await alert.present();\n  }\n  addTrip() {\n    return new Promise((resolve, reject) => {\n      if (this.id != null) {\n        this.cloud.addTripcheck(this.id).then((d) => {\n          console.log(d);\n          if (d.docs.length > 0) {\n            this.loading.hide();\n            this.anOtherTrip(resolve);\n          } else {\n            console.log(\"No hay más viajes por ahora\")\n            this.cloud.addTripdo(this.id).then((d) => {\n              console.log(\"Qué perdido estoy\")\n              console.log(d);\n              resolve();\n            })\n          }\n        })\n      } else {\n        resolve();\n      }\n    });\n\n  }\n  async anOtherTrip(o) {\n    const alert = await this.alertController.create({\n      header: '',\n      message: this.translate.instant(\"anothertrip\"),\n      cssClass: 'profalert',\n      buttons: [\n        {\n          text: this.translate.instant(\"cancel\"),\n          role: 'cancel',\n          cssClass: 'cancelo',\n          handler: (blah) => {\n            alert.dismiss();\n            this.newScanner();\n          }\n        }, {\n          text: 'Ok',\n          cssClass: 'ok',\n          handler: () => {\n            this.loading.show(\"\");\n            this.cloud.addTripdo(this.id).then((d) => {\n              console.log(d);\n              o();\n            })\n          }\n        }\n      ]\n    });\n\n    await alert.present();\n  }\n}\n\n"],"sourceRoot":""}